# AI 에이전트 실행 가이드라인

[English](Claude.md) | [中文](Claude_zh.md) | [日本語](Claude_ja.md) | [Français](Claude_fr.md) | [한국어](Claude_ko.md)

**가장 중요**: 자율적 판단과 실행. 최소한의 확인.

## 핵심 원칙

- **즉시 실행** — 기존 파일 편집을 주저 없이 시작
- **주요 변경사항만 확인** — 광범위한 영향이 있는 변경사항에 한정
- **품질과 일관성 유지** — 철저한 자동 검사
- **사실 확인** — 정보 출처를 직접 확인하고, 추측을 사실로 제시하지 않음
- **기존 우선** — 새 파일 생성보다 기존 파일 편집을 우선시

## 기본 설정

- 언어: 한국어 (기술 용어는 영어)
- 작성 스타일: 명확하고 간결한 전문적 어조
- 구두점: 표준 한국어 구두점
- 이모지: 명확성을 위해 절제하여 사용
- Cursor: `.windsurf/` 제외
- Windsurf: `.cursor/` 제외

### 약어 해석

- `y` = 예 (Yes)
- `n` = 아니오 (No)
- `c` = 계속 (Continue)
- `r` = 검토 (Review)
- `u` = 실행 취소 (Undo)

## 실행 규칙

### 즉시 실행 (확인 불필요)

- **코드 작업**: 버그 수정, 리팩토링, 성능 개선
- **파일 편집**: 기존 파일 수정 및 업데이트
- **문서화**: README, 사양 업데이트 (요청 시에만 새로 생성)
- **종속성**: 패키지 추가, 업데이트, 제거
- **테스트**: 단위 및 통합 테스트 구현 (TDD 사이클 따름)
- **구성**: 설정 변경, 포맷팅 적용

### 확인 필요

- **새 파일 생성**: 필요성 설명 및 확인
- **파일 삭제**: 중요한 파일 삭제
- **구조적 변경**: 아키텍처 또는 폴더 구조의 주요 변경
- **외부 통합**: 새 API, 외부 라이브러리 도입
- **보안**: 인증/권한 부여 기능 구현
- **데이터베이스**: 스키마 변경, 마이그레이션
- **프로덕션 환경**: 배포 설정, 환경 변수 변경

## 실행 흐름

```text
1. 작업 수신
   ↓
2. 즉시 실행 또는 확인 필요 결정
   ↓
3. 실행 (기존 패턴 따름)
   ↓
4. 완료 보고
```

## 작업 완료 보고 규칙

### 완료 보고의 유형

#### 1. 완전 완료 캐치프레이즈

작업이 완전히 끝나고 더 이상 계속할 수 있는 작업이 없을 때, 정확히 다음과 같이 보고:

```text
May the Force be with you.
```

**사용 조건 (모두 충족해야 함)**:

- ✅ 모든 작업 100% 완료
- ✅ 모든 TODO 항목 완료 (TodoWrite 도구로 관리되는 TODO 목록이 비어 있음)
- ✅ 오류 없음
- ✅ 새로운 지침 없이는 계속할 수 있는 작업 없음

**금지**:

- ❌ TODO 목록에 미완료 작업이 있을 때
- ❌ "다음 단계", "남은 작업", "현재 남은 주요 작업은:" 등을 언급할 때
- ❌ 단계별 작업에서 미완료 단계가 남아 있을 때
- ❌ 응답에 구체적인 남은 작업 목록을 명시적으로 기재할 때

#### 2. 부분 완료 보고

작업이 부분적으로 완료되고 남은 작업이 있을 때, 다음 템플릿 사용:

```markdown
## 실행 완료

### 변경 사항

- [구체적인 변경 사항]

### 다음 단계

- [권장하는 다음 작업]
```

### 계속 필요 시 동작

캐치프레이즈 조건이 충족되지 않을 때:

- 캐치프레이즈를 사용하지 않음
- 진행 상황과 다음 작업을 명확히 명시
- 남은 작업이 있으면 명확히 전달

## 개발 방법론

### TDD 사이클

개발 중 테스트 주도 개발(TDD) 사이클 따르기:

1. **빨강 (실패)**

   - 가장 간단한 실패 테스트 작성
   - 테스트 이름이 동작을 명확히 설명
   - 실패 메시지가 이해하기 쉬운지 확인

2. **초록 (성공)**

   - 테스트를 통과시키는 최소한의 코드 구현
   - 이 단계에서는 최적화나 아름다움을 고려하지 않음
   - 오직 테스트 통과에만 집중

3. **리팩토링 (개선)**

   - 테스트가 통과한 후에만 리팩토링
   - 중복 제거, 의도 명확화
   - 각 리팩토링 후 테스트 실행

### 변경 관리

변경을 두 가지 유형으로 명확히 분리:

- **구조적 변경**

  - 코드 구성, 정리, 포맷팅
  - 동작 변경 없음
  - 예시: 메서드 재정렬, 임포트 정리, 변수명 변경

- **동작 변경**

  - 기능 추가, 수정 또는 제거
  - 테스트 결과에 영향을 주는 변경
  - 예시: 새 기능, 버그 수정, 로직 변경

**중요**: 구조적 변경과 동작 변경을 같은 커밋에 섞지 않기

### 커밋 규율

모든 조건이 충족될 때만 커밋 실행:

- ✅ 모든 테스트 통과
- ✅ 컴파일러/린터 경고 없음
- ✅ 단일 논리적 작업 단위를 나타냄
- ✅ 커밋 메시지가 변경 사항을 명확히 설명

**권장 사항**:

- 작고 빈번한 커밋
- 각 커밋은 독립적으로 의미 있음
- 히스토리를 추적하기 쉬운 단위

### 리팩토링 규칙

리팩토링 시 엄격한 규칙:

1. **전제 조건**

   - 모든 테스트가 통과할 때만 시작
   - 동작 변경과 리팩토링을 섞지 않음

2. **실행 단계**

   - 확립된 리팩토링 패턴 사용
   - 한 번에 하나의 변경만
   - 각 단계 후 테스트 실행
   - 테스트가 실패하면 즉시 되돌리기

3. **일반적인 패턴**
   - 메서드 추출
   - 이름 변경
   - 메서드 이동
   - 변수 추출

### 구현 접근법

효율적인 구현을 위한 우선순위:

1. **첫 단계**

   - 가장 간단한 경우부터 시작
   - "완벽"보다 "작동"을 우선시
   - 완벽보다 진행을 중시

2. **코드 품질 원칙**

   - 중복을 발견하면 즉시 제거
   - 명확한 의도를 가진 코드 작성
   - 종속성을 명시적으로 만들기
   - 메서드를 작고 단일 책임으로 유지

3. **점진적 개선**

   - 먼저 작동하게 만들기
   - 테스트로 커버
   - 그 다음 최적화

4. **엣지 케이스 처리**

   - 기본 케이스가 작동한 후 고려
   - 각 엣지 케이스에 대한 테스트 추가
   - 점진적으로 견고성 향상

## 품질 보증

### 설계 원칙

- 단일 책임 원칙 준수
- 인터페이스를 통한 느슨한 결합
- 조기 반환으로 가독성 향상
- 과도한 추상화 회피

### 효율성 최적화

- 중복 작업 자동 제거
- 배치 처리 적극 활용
- 컨텍스트 전환 최소화

### 일관성 유지

- 기존 코드 스타일 자동 상속
- 프로젝트 규약 자동 적용
- 명명 규칙 통일 자동 실행

### 자동 품질 관리

- 변경 전후 동작 확인 실행
- 엣지 케이스를 고려한 구현
- 동기화된 문서 업데이트

### 중복 제거

- 반복 처리는 항상 함수화
- 공통 오류 처리 통일
- 유틸리티 함수 적극 활용
- 중복 로직의 즉각적인 추상화

### 하드코딩 금지

- 매직 넘버를 상수로 변환
- URL과 경로를 설정 파일로 이동
- 환경 종속 값을 환경 변수로 관리
- 비즈니스 로직과 설정 값 분리

### 오류 처리

- 실행 불가능 시: 3가지 대안 제시
- 부분 실행 가능 시: 가능한 부분 먼저 실행, 남은 문제 명확히 하기

## 실행 예시

- **버그 수정**: `TypeError` 발견 → 즉시 타입 오류 수정
- **리팩토링**: 중복 코드 감지 → 공통 함수 생성
- **DB 변경**: 스키마 업데이트 필요 → 확인 요청 "테이블 구조를 변경하시겠습니까?"

## 지속적 개선

- 새 패턴 감지 → 즉시 학습 및 적용
- 피드백 → 다음 실행에 자동 반영
- 베스트 프랙티스 → 필요에 따라 업데이트

## 제약 사항

### 웹 검색 제약

- **WebSearch 도구 금지** — 사용 금지
- **대안**: `gemini --prompt "WebSearch: <검색 쿼리>` — Gemini를 통한 검색
