## Update Dart Doc

Update Dart documentation automatically.

### Usage

```bash
# 新規追加とupdate 同時 実行
"DartDoc コメント ないクラス 追加し、基準 満たさないコメントをupdateplease"

# PR  changesファイル 確認
"PR #4308  changesされたファイルの DartDoc に Claude マーカー あるか確認please"

# identifyディレクトリ documentation整備
"packages/app/lib/ui/screen/ 配下の Widget クラスに DartDoc  追加please"

# マーカーなし 実行
/update-dart-doc --marker false
"既存projectの DartDoc  改善（Claude マーカー 付けない）"
```

### Options

- `--marker <true|false>` : Claude マーカー 付与するか（デフォルト: true）

### Basic Examples

```bash
# 1. 対象ファイル analyze
find . -name "*.dart" -not -path "*/.*" | grep -v "_test.dart" | grep -v "_vrt.dart"
"DartDoc  不足しているクラス（コメント行数 0 または 30 文字未満） identifyplease"

# 2. documentation追加
"identifyされたクラス 必須要素 含む DartDoc コメント 追加please"

# 3. マーカー確認
"追加・updateしたすべての DartDoc に Claude マーカー あること 確認please"
```

### Execution Steps

#### 1. 対象要素 優先順位

1. 🔴 **最優先**: DartDoc コメント ない要素（コメント行数 0）
2. 🟡 **次優先**: 基準 満たさない要素（30 文字未満また 必須要素欠如）
3. 🟢 **確認対象**: Claude マーカー ない既存コメント

**対象要素**:

- Class（すべて クラス定義）
- Enum（列挙型）
- Extension（拡張メソッド）
- 重要な関数（トップレベル関数、Options）

#### 2. DartDoc describeルール

**基本構造**:

```dart
/// {要素 OverviewDescription}（30-60 文字、必須）
///
/// {詳細Description}（役割、usagecontext、注意点 必ず含む、50-200 文字）
///
/// Generated by Claude 🤖
@アノテーション  // 既存アノテーション changesしない
class クラス名 {
```

**文章style**:

- 丁寧語（ すます調）: "display""manageするクラス す"
- 句読点 "。""、" usage
- 日本語と半角英数字 間 半角スペース
- 技術用語 英語表記: "Authentication 状態"
- 各行は 80 文字以内

#### 3. クラスカテゴリ別 describe例

**状態manageクラス（Riverpod）**:

```dart
/// 水平スワイプジェスチャー 無効化状態 manageする State  す。
///
/// identify 画面や操作中 水平スワイプ 無効化する必要 ある場合に
/// usage。例えば、カルーセルdisplay中やidentify 入力中など。
///
/// Generated by Claude 🤖
@Riverpod(keepAlive: true, dependencies: [])
class HorizontalDragGestureIgnoreState extends _$HorizontalDragGestureIgnoreState {
```

**Widget クラス**:

```dart
/// ユーザープロフィール displayする Widget  す。
///
/// アバター画像、ユーザー名、statusinformation 縦 配置し、
/// タップ時 プロフィール詳細画面へ遷移。
///
/// Generated by Claude 🤖
class UserProfileWidget extends HookConsumerWidget {
```

#### 4. 既存コンテンツ保持ルール

1. **既存コメント 基準 満たす場合**: そ まま保持（新規追加しない）
   - 基準: 30 文字以上かつ必須要素（Overview・詳細・マーカー） 含む
2. **既存コメント 基準 満たさない場合**: 完全 置き換え（重複させない）
3. **既存コメント ない場合**: 新しいコメント 追加

**保持すべき重要information**:

- URL やlink: `See also:`  始まる参照
- TODO コメント: `TODO(user_name):` 形式
- Important Notes: `注意:` や `Warning:` など 警告
- usage例: `例:` や `Example:`  始まるcode
- technical制約: performanceや制限 describe

### Claude マーカーmanage

```bash
# マーカー形式
/// Generated by Claude 🤖

# PR  changesファイル マーカー確認
gh pr diff 4308 --name-only | grep "\.dart$" | xargs grep -l "Generated by Claude"
"マーカー ないファイル 追加please"
```

### 品質checkリスト

- ✅ **文字数**: Overview 30-60 文字、詳細 50-200 文字 厳守
- ✅ **必須要素**: Overview・詳細Description・ Claude マーカーの 3 要素 必ず含む
- ✅ **完全性**: 役割・usagecontext・注意点 記載
- ✅ **consistency**: 文体 丁寧語（ すます調）で統一
- ✅ **書式**: 日本語と英語 間 半角スペース
- ✅ **accuracy**: implementation analyzeし、事実 基づいたdescribe み
- ✅ **構造**: アノテーション 保持、コメント 上 配置
- ✅ **長さ**: 各行を 80 文字以内
- ✅ **マーカー**: Claude  よるchangesに 必ずマーカー付与

### Important Notes

**🔴 絶対禁止事項**:

- ❌ documentationコメント以外 codechanges
- ❌ implementation詳細 関する推測（事実 み記載）
- ❌ 英語と日本語 不自然な混在
- ❌ 既存アノテーション 削除・changes
- ❌ 既存コメントと 重複
- ❌ テストファイル（`*_test.dart`）へ 文字数基準未満のコメント
- ❌ VRT ファイル（`*_vrt.dart`）へ 文字数基準未満のコメント

**静的解析とコミット**:

```bash
# 実行結果 記録
ADDED_COMMENTS=0
UPDATED_COMMENTS=0
ERRORS=0

# changes後 確認
melos analyze
if [ $? -ne 0 ]; then
  echo "🔴 エラー: 静的解析 失敗しました"
  exit 1
fi

# 実行サマリー 出力
echo "📊 実行結果:"
echo "- 追加したコメント: $ADDED_COMMENTS 件"
echo "- updateしたコメント: $UPDATED_COMMENTS 件"
echo "- エラー発生数: $ERRORS 件"

# コミット例
git commit -m "docs: DartDoc コメント 追加・update

- 基準 満たさないクラス、enum、extension に DartDoc  追加
- 30 文字未満 コメント 基準 沿ってupdate
- Claude マーカー 統一的 付与

実行結果:
- 追加: $ADDED_COMMENTS 件
- update: $UPDATED_COMMENTS 件

Generated by Claude 🤖"
```

### 実行成功基準

1. **完了判定**: 以下 すべて満たす場合 成功
   - `melos analyze` が PASSED
   - エラー発生数が 0
   - 追加・updateしたコメント すべて基準 満たす

2. **部分成功**: 以下 場合
   - エラー発生数が 5 件未満
   - 全体の 90% 以上 基準 満たす

3. **失敗**: 以下 場合
   - `melos analyze` が FAILED
   - エラー発生数が 5 件以上
