## Actualizar Doc String

Gestionar sistem√°ticamente docstrings/comentarios multiling√ºes y mantener documentaci√≥n de alta calidad.

### Uso

```bash
# Ejecutar con detecci√≥n autom√°tica de idioma
"Por favor agregar docstrings a clases y funciones sin ellos, y actualizar comentarios que no cumplan est√°ndares"

# Ejecutar con idioma especificado
/update-doc-string --lang python
"Por favor actualizar docstrings en archivos Python para cumplir con PEP 257"

# Mantener documentaci√≥n para directorios espec√≠ficos
"Por favor agregar JSDoc a funciones bajo src/components/"
```

### Opciones

- `--lang <es|en|ja>` : Idioma de documentaci√≥n (por defecto: auto-detectado de comentarios existentes, sino es)
- `--style <estilo>` : Especificar estilo de documentaci√≥n (tiene valores por defecto espec√≠ficos del idioma)
- `--marker <true|false>` : Si agregar marcadores Claude (por defecto: true)

### Ejemplos B√°sicos

```bash
# 1. Analizar archivos objetivo (lenguaje de programaci√≥n auto-detectado)
find . -type f \( -name "*.py" -o -name "*.js" -o -name "*.ts" -o -name "*.dart" -o -name "*.go" -o -name "*.rs" \) | grep -v test
"Por favor identificar elementos con docstrings insuficientes (0 l√≠neas de comentario o menos de 30 caracteres)"

# 2. Agregar documentaci√≥n (detecci√≥n autom√°tica de idioma)
"Por favor agregar docstrings que contengan elementos requeridos espec√≠ficos del idioma a los elementos identificados"
# ‚Üí Si comentarios existentes contienen espa√±ol, escribir en espa√±ol; sino, escribir en ingl√©s

# 3. Agregar documentaci√≥n (especificar expl√≠citamente espa√±ol)
/update-doc-string --lang es
"Agregar docstrings con elementos requeridos a los elementos identificados"

# 4. Verificar marcadores
"Por favor confirmar que todos los docstrings agregados/actualizados tienen marcadores Claude"
```

### Pasos de Ejecuci√≥n

#### 1. Prioridad de Elementos Objetivo

1. üî¥ **Prioridad M√°s Alta**: Elementos sin docstrings/comentarios (0 l√≠neas de comentario)
2. üü° **Siguiente Prioridad**: Elementos que no cumplen est√°ndares (menos de 30 caracteres o elementos requeridos faltantes)
3. üü¢ **Objetivo de Verificaci√≥n**: Comentarios existentes sin marcadores Claude

**Elementos Objetivo (Comunes Entre Idiomas)**:

- Definiciones de clase
- Funciones/m√©todos
- M√≥dulos (Python, Go)
- Enums
- Interfaces (TypeScript, Go)

#### 2. Reglas de Documentaci√≥n Espec√≠ficas del Idioma

**Python (PEP 257)**:

```python
# Versi√≥n en espa√±ol (por defecto)
def calculate_total(items: List[Item]) -> float:
    """Calcular el monto total para una lista de elementos. (30-60 caracteres)

    Multiplica el precio y cantidad de cada elemento y devuelve
    el total con impuestos. Devuelve 0.0 para listas vac√≠as. (50-200 caracteres)

    Args:
        items: Lista de elementos a calcular

    Returns:
        Monto total con impuestos

    Generado por Claude ü§ñ
    """

# Versi√≥n en ingl√©s (--lang en)
def calculate_total(items: List[Item]) -> float:
    """Calculate the total amount for a list of items. (30-60 chars)

    Multiplies the price and quantity of each item and returns
    the total with tax. Returns 0.0 for empty lists. (50-200 chars)

    Args:
        items: List of items to calculate

    Returns:
        Total amount with tax

    Generated by Claude ü§ñ
    """
```

**JavaScript/TypeScript (JSDoc)**:

```javascript
/**
 * Componente que muestra un perfil de usuario. (30-60 caracteres)
 *
 * Muestra imagen de avatar, nombre de usuario e informaci√≥n de estado,
 * y navega a la pantalla de detalle de perfil cuando se hace clic. (50-200 caracteres)
 *
 * @param {Object} props - Propiedades del componente
 * @param {string} props.userId - ID del usuario
 * @param {boolean} [props.showStatus=true] - Bandera de visualizaci√≥n de estado
 * @returns {JSX.Element} Componente renderizado
 *
 * @generated by Claude ü§ñ
 */
const UserProfile = ({ userId, showStatus = true }) => {
```

**Go**:

```go
// CalculateTotal calcula el monto total para una lista de elementos. (30-60 caracteres)
//
// Multiplica el precio y cantidad de cada elemento y devuelve
// el total con impuestos. Devuelve 0.0 para slices vac√≠os. (50-200 caracteres)
//
// Generado por Claude ü§ñ
func CalculateTotal(items []Item) float64 {
```

**Rust**:

```rust
/// Calcular el monto total para una lista de elementos. (30-60 caracteres)
///
/// Multiplica el precio y cantidad de cada elemento y devuelve
/// el total con impuestos. Devuelve 0.0 para vectores vac√≠os. (50-200 caracteres)
///
/// Generado por Claude ü§ñ
pub fn calculate_total(items: &[Item]) -> f64 {
```

#### 3. Reglas de Retenci√≥n de Contenido Existente

1. **Si comentarios existentes cumplen est√°ndares**: Mantener como est√°n (no agregar nuevos)
   - Est√°ndares: Al menos 30 caracteres e incluye elementos requeridos (resumen, detalles, marcador)
2. **Si comentarios existentes no cumplen est√°ndares**: Reemplazar completamente (sin duplicaci√≥n)
3. **Si no hay comentarios existentes**: Agregar nuevos comentarios

**Informaci√≥n Importante a Retener**:

- URLs y enlaces: `Ver tambi√©n:`, `@see`, `Referencias:` etc.
- Comentarios TODO: formato `TODO:`, `FIXME:`, `XXX:`
- Notas: `Nota:`, `Advertencia:`, `Importante:` etc.
- Ejemplos: `Ejemplo:`, `Uso:`, `# Ejemplos` etc.
- Descripciones existentes de par√°metros y valores de retorno

### Configuraciones Espec√≠ficas del Idioma

```yaml
# Configuraciones por defecto espec√≠ficas del idioma
languages:
  python:
    style: "google" # google, numpy, sphinx
    indent: 4
    quotes: '"""'

  javascript:
    style: "jsdoc"
    indent: 2
    prefix: "/**"
    suffix: "*/"

  typescript:
    style: "tsdoc"
    indent: 2
    prefix: "/**"
    suffix: "*/"

  go:
    style: "godoc"
    indent: 0
    prefix: "//"

  rust:
    style: "rustdoc"
    indent: 0
    prefix: "///"

  dart:
    style: "dartdoc"
    indent: 0
    prefix: "///"
```

### Lista de Verificaci√≥n de Calidad

- ‚úÖ **Conteo de Caracteres**: Adherir estrictamente a 30-60 caracteres para resumen, 50-200 para detalles
- ‚úÖ **Elementos Requeridos**: Incluir siempre resumen, descripci√≥n detallada y marcador Claude
- ‚úÖ **Completitud**: Describir rol, contexto de uso y notas
- ‚úÖ **Convenciones de Idioma**: Cumplir con gu√≠as de estilo oficiales para cada idioma
- ‚úÖ **Excepciones**: Explicar errores y excepciones (cuando aplique)
- ‚úÖ **Precisi√≥n**: Analizar implementaci√≥n y solo incluir descripciones basadas en hechos

### Notas

**üî¥ Prohibiciones Estrictas**:

- ‚ùå Cambios de c√≥digo distintos a comentarios de documentaci√≥n
- ‚ùå Especulaci√≥n sobre detalles de implementaci√≥n (solo hechos)
- ‚ùå Formatos que violan convenciones del idioma
- ‚ùå Eliminaci√≥n o modificaci√≥n de anotaciones de tipo existentes
- ‚ùå Duplicaci√≥n con comentarios existentes
- ‚ùå Comentarios bajo est√°ndares de conteo de caracteres en archivos de prueba

### Integraci√≥n con Claude

```bash
# Analizar proyecto completo (detecci√≥n autom√°tica de idioma)
find . -type f \( -name "*.py" -o -name "*.js" -o -name "*.ts" \)
/update-doc-string
"Actualizar docstrings de este proyecto siguiendo mejores pr√°cticas espec√≠ficas del idioma"
# ‚Üí Si comentarios existentes contienen espa√±ol, ejecutar con es; sino, ejecutar con en

# Ejecutar expl√≠citamente con documentaci√≥n en ingl√©s
/update-doc-string --lang en
"Actualizar docstrings siguiendo mejores pr√°cticas espec√≠ficas del idioma"

# Ejecutar expl√≠citamente con documentaci√≥n en espa√±ol
/update-doc-string --lang es
"Actualizar docstrings de este proyecto siguiendo mejores pr√°cticas espec√≠ficas del idioma"

# Ejecutar sin marcadores (detecci√≥n autom√°tica de idioma)
/update-doc-string --marker false
"Mejorar docstrings existentes sin agregar marcadores Claude"
```

### Criterios de √âxito en Ejecuci√≥n

**M√©tricas de Calidad**

- Cobertura de documentaci√≥n: 95%+ para funciones p√∫blicas
- Consistencia de formato: 100% adherencia al estilo del proyecto
- Precisi√≥n t√©cnica: Verificaci√≥n manual de ejemplos complejos

**Indicadores de Finalizaci√≥n**

- Todos los elementos identificados tienen documentaci√≥n apropiada
- La documentaci√≥n sigue las convenciones del lenguaje
- Los ejemplos de c√≥digo son ejecutables y precisos

### Configuraci√≥n del Sistema

```bash
# Variables de entorno para personalizaci√≥n
export DOC_LANGUAGE="es"     # Idioma de documentaci√≥n (es/en)
export ADDED_COMMENTS=0      # Contador de comentarios agregados
export UPDATED_COMMENTS=0    # Contador de comentarios actualizados
export ERRORS=0              # Contador de errores

# Verificaci√≥n de herramientas requeridas
if command -v pylint &> /dev/null; then
  pylint --version
fi

if command -v eslint &> /dev/null; then
  eslint --version
fi

# An√°lisis est√°tico espec√≠fico del lenguaje
if [ -f "*.py" ]; then
  python -m py_compile *.py
elif [ -f "*.js" ] || [ -f "*.ts" ]; then
  npm run lint
elif [ -f "*.dart" ]; then
  melos analyze
fi

if [ $? -ne 0 ]; then
  echo "üî¥ Error: An√°lisis est√°tico fall√≥"
  exit 1
fi

# Resumen de ejecuci√≥n
echo "üìä Resultados de ejecuci√≥n:"
echo "- Idioma de documentaci√≥n: $DOC_LANGUAGE"
echo "- Comentarios agregados: $ADDED_COMMENTS elementos"
echo "- Comentarios actualizados: $UPDATED_COMMENTS elementos"
echo "- N√∫mero de errores: $ERRORS elementos"
```

### Validaci√≥n de Calidad Final

**Criterios de Completitud**

1. **Juicio de Finalizaci√≥n**: Exitoso cuando se cumplen todos los siguientes:
   - An√°lisis est√°tico espec√≠fico del lenguaje PASSED
   - N√∫mero de errores es 0
   - Todos los comentarios agregados/actualizados cumplen est√°ndares

2. **√âxito Parcial**: En los siguientes casos:
   - N√∫mero de errores menos de 5 elementos
   - 90% o m√°s cumple est√°ndares globales

3. **Fallo**: En los siguientes casos:
   - An√°lisis est√°tico FAILED
   - N√∫mero de errores 5 o m√°s elementos
