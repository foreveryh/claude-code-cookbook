## PR 反饋處理

高效處理 Pull Request 的審查評論，採用錯誤分析三阶段方法寻求根本解決方案。

### 使用方法

```bash
# 獲取並分析審查評論
gh pr view --comments
「請按優先級分類審查評論並創建應對計劃」

# 錯誤相關評論的詳细分析
gh pr checks
「請用三阶段方法分析 CI 錯誤並找出根本原因」

# 修復完成後的質量確認
npm test && npm run lint
「修復已完成，請檢查回歸測試和代碼質量」
```

### 基本示例

```bash
# 執行評論分類
gh pr view 123 --comments | head -20
"請將審查評論分類為 must/imo/nits/q 並決定處理顺序"

# 收集錯誤資訊
npm run build 2>&1 | tee error.log
"請找出構建錯誤的根本原因並提出適当的修復方法"

# 確認修復實現
git diff HEAD~1
"請評估此修復是否恰当解決了審查指出的問題"
```

### 評論分類體系

```
🔴 must: 必须修復
├─ 安全問題
├─ 功能缺陷
├─ 設計原則违反
└─ 規範违反

🟡 imo: 改進建議
├─ 更好的實現方法
├─ 性能改進
├─ 可讀性提升
└─ 重構建議

🟢 nits: 轻微指摘
├─ 拼寫錯誤更正
├─ 縮進調整
├─ 注釋添加
└─ 命名微調

🔵 q: 問題與確認
├─ 實現意圖確認
├─ 規格明確化
├─ 設計決策背景
└─ 替代方案探讨
```

### 錯誤分析三阶段方法

#### 第一阶段：資訊收集

**必须執行**

- 完整獲取錯誤消息
- 確認堆棧跟蹤
- 確定重現條件

**推薦執行**

- 收集環境資訊
- 最近的更改歷史
- 確認相關日誌

#### 第二阶段：根本原因分析

- 應用 5 Whys 分析
- 追蹤依賴關系
- 確認環境差異
- 創建最小重現代碼

#### 第三阶段：解決方案實施

- 立即處理(熱修復)
- 根本解決(本質修復)
- 預防措施(防止復發)

### 應對流程

1. **評論分析**: 按優先級分類
2. **修復計劃**: 決定處理顺序
3. **阶段性修復**: Critical → High → Medium → Low
4. **質量確認**: 測試、代碼檢查、構建
5. **進度報告**: 具體說明修復內容

### 修復後的確認

```bash
# 基本檢查
npm test
npm run lint
npm run build

# 回歸測試
npm run test:e2e

# 代碼質量
npm run test:coverage
```

### 回復模板

**修復完成報告**

```markdown
@reviewer 感谢您的指正。
修復已完成：

- [具體修復內容]
- [測試結果]
- [確認方法]
```

**技術判斷說明**

```markdown
實現背景：[原因]
考虑的替代方案：[選項與判斷依據]
採用方案的優點：[優勢]
```

### 注意事項

- **遵守優先級**: 按 Critical → High → Medium → Low 顺序處理
- **測試優先**: 修復前確認回歸測試
- **明確報告**: 具體描述修復內容和確認方法
- **建設性對話**: 基于技術依據的礼貌沟通
