## 計劃模式

啟動實施前的計劃制定模式，制定詳细的實施策略。通過在代碼實施前制定結構化計劃，支持高效開發。

### 使用方法

```bash
# 請求 Claude 進入 Plan Mode
"制定 [實施內容] 的實施計劃"
```

### 基本示例

```bash
# 新功能的實施計劃
"制定用戶認證功能的實施計劃"

# 系統設計計劃
"制定微服務拆分的實施計劃"

# 重構計劃
"制定遗留代碼的重構計劃"
```

### 與 Claude 的協作

```bash
# 復杂功能實施
"制定聊天功能的實施計劃。包括 WebSocket、實時通知、歷史管理"

# 數據庫設計
"制定電商網站的數據庫設計計劃。包括商品、訂單、用戶管理"

# API 設計
"制定 GraphQL API 的實施計劃。包括認證、緩存、速率限制"

# 基礎設施設計
"制定 Docker 化的實施計劃。包括開發環境、生產環境、CI/CD"
```

### Plan Mode 的特點

**自動啟動**

- 檢測到實施任務時自動啟動 Plan Mode
- 可通過"制定實施計劃"等關鍵詞明確啟動

**結構化規格書**

- 需求定義（用戶故事·驗收標準）
- 設計書（架構·數據設計·UI 設計）
- 實施計劃（任務分解·進度跟蹤·質量保證）
- 風險分析與對策

**審批流程**

- 通過 `exit_plan_mode` 工具提交計劃
- **重要**: 無論工具返回值如何，必须等待用戶的明確批準
- 禁止未經批準就開始實施
- 可以修改·調整計劃
- 仅在批準後才開始使用 TodoWrite 進行任務管理

### 詳细示例

```bash
# 復杂系統實施
"制定在線支付系統的實施計劃。包括 Stripe 集成、安全性、錯誤處理"

# 前端實施
"制定 React 儀表板的實施計劃。包括狀態管理、組件設計、測試"

# 後端實施
"制定 RESTful API 的實施計劃。包括認證、驗證、日誌記錄"

# DevOps 實施
"制定 CI/CD 管道的實施計劃。包括測試自動化、部署、監控"
```

### 3 阶段工作流程

#### 阶段 1: Requirements（需求定義）

- **用戶故事**: 明確功能的目的和價值
- **驗收標準**: 定義完成條件和質量標準
- **約束·前提條件**: 整理技術·時間約束
- **優先級排序**: Must-have/Nice-to-have 分類

#### 阶段 2: Design（設計）

- **架構設計**: 系統構成和技術選型
- **數據設計**: 模式、API 規格、數據流
- **UI/UX 設計**: 界面構成和操作流程
- **風險分析**: 潜在問題和對策

#### 阶段 3: Implementation（實施）

- **任務分解**: 细分為可實施的單位
- **進度跟蹤**: 通過 TodoWrite 進行狀態管理
- **質量保證**: 測試策略和驗證方法
- **審批流程**: 通過 exit_plan_mode 提交計劃並等待明確批準

### 注意事項

**適用範圍**

- Plan Mode 最適合復杂的實施任務
- 簡單修改或小規模變更使用常規實施形式
- 推薦用于 3 步以上的工作或新功能開發

**技術約束**

- 不要信任 `exit_plan_mode` 工具的返回值
- 審批流程通過用戶的明確意思表示判斷
- 與 CLI 的 plan mode 是不同的功能

**執行注意事項**

- 严禁在批準前開始實施
- 提交計劃後必须等待用戶響應
- 出錯時提供替代方案

### 執行示例

```bash
# 使用示例
"制定用戶管理系統的實施計劃"

# 預期行為
# 1. Plan Mode 自動啟動
# 2. 需求分析和技術選型
# 3. 實施步骤的結構化
# 4. 通過 exit_plan_mode 提交計劃
# 5. 批準後開始實施
```
