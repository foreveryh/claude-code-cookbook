## Update Dart Doc

G√®re syst√©matiquement les commentaires DartDoc dans les fichiers Dart et maintient une documentation japonaise de haute qualit√©.

### Utilisation

```bash
# Effectuer ajouts et mises √† jour simultan√©ment
"Add DartDoc comments to classes without them and update comments that don't meet standards"

# V√©rifier les fichiers modifi√©s dans la PR
"Check if there are Claude markers in the DartDoc of files changed in PR #4308"

# Maintenir la documentation pour des r√©pertoires sp√©cifiques
"Add DartDoc to Widget classes under packages/app/lib/ui/screen/"

# Ex√©cuter sans marqueurs
/update-dart-doc --marker false
"Improve DartDoc in existing project (without Claude markers)"
```

### Options

- `--marker <true|false>` : Ajouter ou non les marqueurs Claude (d√©faut : true)

### Exemples de base

```bash
# 1. Analyser les fichiers cibles
find . -name "*.dart" -not -path "*/.*" | grep -v "_test.dart" | grep -v "_vrt.dart"
"Identify classes with insufficient DartDoc (0 lines or less than 30 characters)"

# 2. Ajouter la documentation
"Add DartDoc comments containing required elements to the identified classes"

# 3. V√©rifier les marqueurs
"Ensure all added/updated DartDoc have Claude markers"
```

### Proc√©dure d'ex√©cution

#### 1. Priorit√© des √©l√©ments cibles

1. üî¥ **Priorit√© la plus √©lev√©e** : √âl√©ments sans commentaires DartDoc (0 ligne de commentaire)
2. üü° **Priorit√© suivante** : √âl√©ments ne respectant pas les standards (moins de 30 caract√®res ou √©l√©ments requis manquants)
3. üü¢ **Cible de v√©rification** : Commentaires existants sans marqueurs Claude

**√âl√©ments cibles** :

- Classes (toutes les d√©finitions de classe)
- Enums
- Extensions
- Fonctions importantes (fonctions de niveau sup√©rieur, optionnel)

#### 2. R√®gles de r√©daction DartDoc

**Structure de base** :

```dart
/// {R√©sum√© de l'√©l√©ment} (30-60 caract√®res, requis)
///
/// {Description d√©taill√©e} (doit inclure le r√¥le, contexte d'usage et notes, 50-200 caract√®res)
///
/// Generated by Claude ü§ñ
@annotation  // Ne pas changer les annotations existantes
class ClassName {
```

**Style de texte** :

- Langage poli (forme desu/masu) : "affiche", "est une classe qui g√®re"
- Utiliser la ponctuation japonaise : „Äå„ÄÇ„Äç„Äå„ÄÅ„Äç
- Ajouter un espace demi-chasse entre caract√®res japonais et alphanum√©riques
- Utiliser l'anglais pour les termes techniques : "Authentication state"
- Garder chaque ligne dans les 80 caract√®res

#### 3. Exemples de r√©daction par cat√©gorie de classe

**Classe de gestion d'√©tat (Riverpod)** :

```dart
/// √âtat qui g√®re l'√©tat d√©sactiv√© des gestes de balayage horizontal.
///
/// Utilis√© quand les balayages horizontaux doivent √™tre d√©sactiv√©s pendant certains √©crans ou op√©rations,
/// comme pendant les affichages de carrousel ou certaines saisies.
///
/// Generated by Claude ü§ñ
@Riverpod(keepAlive: true, dependencies: [])
class HorizontalDragGestureIgnoreState extends _$HorizontalDragGestureIgnoreState {
```

**Classe Widget** :

```dart
/// Widget qui affiche un profil utilisateur.
///
/// Organise verticalement l'image avatar, nom d'utilisateur et informations de statut,
/// et navigue vers l'√©cran de d√©tail du profil lorsqu'il est tap√©.
///
/// Generated by Claude ü§ñ
class UserProfileWidget extends HookConsumerWidget {
```

#### 4. R√®gles de pr√©servation du contenu existant

1. **Si le commentaire existant respecte les standards** : Conserver tel quel (ne pas ajouter de nouveau commentaire)
   - Standards : 30+ caract√®res et inclut les √©l√©ments requis (r√©sum√©, d√©tails, marqueur)
2. **Si le commentaire existant ne respecte pas les standards** : Remplacer compl√®tement (pas de duplication)
3. **S'il n'y a pas de commentaire existant** : Ajouter un nouveau commentaire

**Informations importantes √† pr√©server** :

- URLs et liens : R√©f√©rences commen√ßant par `See also:`
- Commentaires TODO : Au format `TODO(nom_utilisateur):`
- Notes : Avertissements comme `Note:` ou `Warning:`
- Exemples d'usage : Code commen√ßant par `Example:` ou `Usage:`
- Contraintes techniques : Descriptions de performance ou limitations

### Gestion des marqueurs Claude

```bash
# Format de marqueur
/// Generated by Claude ü§ñ

# V√©rifier les marqueurs dans les fichiers modifi√©s de la PR
gh pr diff 4308 --name-only | grep "\.dart$" | xargs grep -l "Generated by Claude"
"Add markers to files that don't have them"
```

### Liste de contr√¥le qualit√©

- ‚úÖ **Nombre de caract√®res** : Respecter strictement 30-60 caract√®res pour r√©sum√©, 50-200 pour d√©tails
- ‚úÖ **√âl√©ments requis** : Toujours inclure 3 √©l√©ments - r√©sum√©, explication d√©taill√©e et marqueur Claude
- ‚úÖ **Compl√©tude** : D√©crire le r√¥le, contexte d'usage et notes
- ‚úÖ **Coh√©rence** : Unifier le style avec langage poli (forme desu/masu)
- ‚úÖ **Format** : Ajouter un espace demi-chasse entre japonais et anglais
- ‚úÖ **Pr√©cision** : Analyser l'impl√©mentation et n'inclure que des descriptions factuelles
- ‚úÖ **Structure** : Pr√©server les annotations, placer les commentaires au-dessus
- ‚úÖ **Longueur** : Garder chaque ligne dans les 80 caract√®res
- ‚úÖ **Marqueur** : Toujours ajouter un marqueur pour les modifications par Claude

### Notes

**üî¥ Interdictions absolues** :

- ‚ùå Modifications de code autres que les commentaires de documentation
- ‚ùå Sp√©culations sur les d√©tails d'impl√©mentation (descriptions factuelles uniquement)
- ‚ùå M√©lange non naturel d'anglais et japonais
- ‚ùå Suppression ou modification des annotations existantes
- ‚ùå Duplication avec les commentaires existants
- ‚ùå Commentaires sous les standards de nombre de caract√®res dans les fichiers de test (`*_test.dart`)
- ‚ùå Commentaires sous les standards de nombre de caract√®res dans les fichiers VRT (`*_vrt.dart`)

**Analyse statique et commit** :

```bash
# Enregistrer les r√©sultats d'ex√©cution
ADDED_COMMENTS=0
UPDATED_COMMENTS=0
ERRORS=0

# V√©rifier apr√®s les modifications
melos analyze
if [ $? -ne 0 ]; then
  echo "üî¥ Erreur : √âchec de l'analyse statique"
  exit 1
fi

# Sortie du r√©sum√© d'ex√©cution
echo "üìä R√©sultats d'ex√©cution :"
echo "- Commentaires ajout√©s : $ADDED_COMMENTS"
echo "- Commentaires mis √† jour : $UPDATED_COMMENTS"
echo "- Erreurs : $ERRORS"

# Exemple de commit
git commit -m "docs: Add and update DartDoc comments

- Add DartDoc to classes, enums, and extensions that don't meet standards
- Update comments under 30 characters to meet standards
- Uniformly add Claude markers

Execution results:
- Added: $ADDED_COMMENTS
- Updated: $UPDATED_COMMENTS

Generated by Claude ü§ñ"
```

### Crit√®res de r√©ussite de l'ex√©cution

1. **R√©ussite compl√®te** : Quand tous les √©l√©ments suivants sont satisfaits
   - `melos analyze` R√âUSSI
   - 0 erreur
   - Tous les commentaires ajout√©s/mis √† jour respectent les standards

2. **R√©ussite partielle** : Quand
   - Moins de 5 erreurs
   - 90% ou plus de tous les commentaires respectent les standards

3. **√âchec** : Quand
   - `melos analyze` √âCHOU√â
   - 5 erreurs ou plus
