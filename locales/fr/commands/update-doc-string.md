## Update Doc String

G√®re syst√©matiquement les docstrings/commentaires multilingues et maintient une documentation de haute qualit√©.

### Utilisation

```bash
# Ex√©cuter avec d√©tection automatique de langue
"Please add docstrings to classes and functions without them, and update comments that don't meet standards"

# Ex√©cuter avec langue sp√©cifi√©e
/update-doc-string --lang python
"Please update docstrings in Python files to comply with PEP 257"

# Maintenir la documentation pour des r√©pertoires sp√©cifiques
"Please add JSDoc to functions under src/components/"
```

### Options

- `--lang <en|fr>` : Langue de documentation (d√©faut : d√©tection automatique depuis les commentaires existants, sinon en)
- `--style <style>` : Sp√©cifier le style de documentation (a des d√©fauts sp√©cifiques √† la langue)
- `--marker <true|false>` : Ajouter ou non les marqueurs Claude (d√©faut : true)

### Exemples de base

```bash
# 1. Analyser les fichiers cibles (langage de programmation d√©tect√© automatiquement)
find . -type f \( -name "*.py" -o -name "*.js" -o -name "*.ts" -o -name "*.dart" -o -name "*.go" -o -name "*.rs" \) | grep -v test
"Please identify elements with insufficient docstrings (0 comment lines or fewer than 30 characters)"

# 2. Ajouter la documentation (utilise l'anglais par d√©faut)
"Please add docstrings containing language-specific required elements to the identified elements"
# ‚Üí Utilise l'anglais pour toute la documentation

# 3. Ajouter la documentation (sp√©cifier explicitement l'anglais)
/update-doc-string --lang en
"Add docstrings with required elements to the identified elements"

# 4. V√©rifier les marqueurs
"Please confirm that all added/updated docstrings have Claude markers"
```

### √âtapes d'ex√©cution

#### 1. Priorit√© des √©l√©ments cibles

1. üî¥ **Priorit√© la plus √©lev√©e** : √âl√©ments sans docstrings/commentaires (0 ligne de commentaire)
2. üü° **Priorit√© suivante** : √âl√©ments ne respectant pas les standards (moins de 30 caract√®res ou √©l√©ments requis manquants)
3. üü¢ **Cible de v√©rification** : Commentaires existants sans marqueurs Claude

**√âl√©ments cibles (communs √† tous langages)** :

- D√©finitions de classe
- Fonctions/m√©thodes
- Modules (Python, Go)
- Enums
- Interfaces (TypeScript, Go)

#### 2. R√®gles de documentation sp√©cifiques aux langages

**Python (PEP 257)** :

```python
# Version anglaise (d√©faut)
def calculate_total(items: List[Item]) -> float:
    """Calculate the total amount for a list of items. (30-60 characters)

    Multiplies the price and quantity of each item and returns
    the total with tax. Returns 0.0 for empty lists. (50-200 characters)

    Args:
        items: List of items to calculate

    Returns:
        Total amount with tax

    Generated by Claude ü§ñ
    """

# Version anglaise (--lang en)
def calculate_total(items: List[Item]) -> float:
    """Calculate the total amount for a list of items. (30-60 chars)

    Multiplies the price and quantity of each item and returns
    the total with tax. Returns 0.0 for empty lists. (50-200 chars)

    Args:
        items: List of items to calculate

    Returns:
        Total amount with tax

    Generated by Claude ü§ñ
    """
```

**JavaScript/TypeScript (JSDoc)** :

```javascript
/**
 * Component that displays a user profile. (30-60 characters)
 *
 * Displays avatar image, username, and status information,
 * and navigates to the profile detail screen when clicked. (50-200 characters)
 *
 * @param {Object} props - Component properties
 * @param {string} props.userId - User ID
 * @param {boolean} [props.showStatus=true] - Status display flag
 * @returns {JSX.Element} Rendered component
 *
 * @generated by Claude ü§ñ
 */
const UserProfile = ({ userId, showStatus = true }) => {
```

**Go** :

```go
// CalculateTotal calculates the total amount for a list of items. (30-60 characters)
//
// Multiplies the price and quantity of each item and returns
// the total with tax. Returns 0.0 for empty slices. (50-200 characters)
//
// Generated by Claude ü§ñ
func CalculateTotal(items []Item) float64 {
```

**Rust** :

```rust
/// Calculate the total amount for a list of items. (30-60 characters)
///
/// Multiplies the price and quantity of each item and returns
/// the total with tax. Returns 0.0 for empty vectors. (50-200 characters)
///
/// Generated by Claude ü§ñ
pub fn calculate_total(items: &[Item]) -> f64 {
```

**Dart (DartDoc)** :

```dart
/// Widget that displays a user profile. (30-60 characters)
///
/// Vertically arranges avatar image, username, and status information,
/// and navigates to the profile detail screen when tapped. (50-200 characters)
///
/// Generated by Claude ü§ñ
class UserProfileWidget extends StatelessWidget {
```

#### 3. R√®gles de r√©tention du contenu existant

1. **Si les commentaires existants respectent les standards** : Garder tels quels (ne pas en ajouter de nouveaux)
   - Standards : Au moins 30 caract√®res et inclut les √©l√©ments requis (r√©sum√©, d√©tails, marqueur)
2. **Si les commentaires existants ne respectent pas les standards** : Remplacer compl√®tement (pas de duplication)
3. **S'il n'y a pas de commentaires existants** : Ajouter de nouveaux commentaires

**Informations importantes √† retenir** :

- URLs et liens : `See also:`, `@see`, `References:` etc.
- Commentaires TODO : Format `TODO:`, `FIXME:`, `XXX:`
- Notes : `Note:`, `Warning:`, `Important:` etc.
- Exemples : `Example:`, `Usage:`, `# Examples` etc.
- Descriptions existantes de param√®tres et valeurs de retour

### Param√®tres sp√©cifiques aux langages

```yaml
# Param√®tres par d√©faut sp√©cifiques aux langages
languages:
  python:
    style: "google"  # google, numpy, sphinx
    indent: 4
    quotes: '"""

  javascript:
    style: "jsdoc"
    indent: 2
    prefix: "/**"
    suffix: "*/"

  typescript:
    style: "tsdoc"
    indent: 2
    prefix: "/**"
    suffix: "*/"

  go:
    style: "godoc"
    indent: 0
    prefix: "//"

  rust:
    style: "rustdoc"
    indent: 0
    prefix: "///"

  dart:
    style: "dartdoc"
    indent: 0
    prefix: "///"
```

### Liste de contr√¥le qualit√©

- ‚úÖ **Nombre de caract√®res** : Respecter strictement 30-60 caract√®res pour r√©sum√©, 50-200 pour d√©tails
- ‚úÖ **√âl√©ments requis** : Toujours inclure r√©sum√©, description d√©taill√©e et marqueur Claude
- ‚úÖ **Compl√©tude** : D√©crire r√¥le, contexte d'usage et notes
- ‚úÖ **Conventions linguistiques** : Respecter les guides de style officiels pour chaque langue
- ‚úÖ **Exceptions** : Expliquer erreurs et exceptions (quand applicable)
- ‚úÖ **Pr√©cision** : Analyser l'impl√©mentation et n'inclure que des descriptions factuelles

### Notes

**üî¥ Interdictions strictes** :

- ‚ùå Modifications de code autres que les commentaires de documentation
- ‚ùå Sp√©culations sur les d√©tails d'impl√©mentation (faits uniquement)
- ‚ùå Formats violant les conventions linguistiques
- ‚ùå Suppression ou modification des annotations de type existantes
- ‚ùå Duplication avec les commentaires existants
- ‚ùå Commentaires sous les standards de nombre de caract√®res dans les fichiers de test

**Ex√©cution et v√©rification** :

```bash
# Enregistrer les r√©sultats d'ex√©cution
ADDED_COMMENTS=0
UPDATED_COMMENTS=0
ERRORS=0

# D√©tection automatique de langue √† partir des commentaires existants
# Si des caract√®res fran√ßais (accents, c√©dilles) sont d√©tect√©s, utiliser fr ; sinon, utiliser en
DOC_LANGUAGE="en"  # D√©faut
if grep -E -r '[√†√¢√§√°√£√•√¶√ß√®√©√™√´√¨√≠√Æ√Ø√±√≤√≥√¥√∂√µ√∏√π√∫√ª√º√ø√Ω√ü√Ä√Ç√Ñ√Å√É√Ö√Ü√á√à√â√ä√ã√å√ç√é√è√ë√í√ì√î√ñ√ï√ò√ô√ö√õ√ú≈∏√ù]' --include="*.py" --include="*.js" --include="*.ts" --include="*.dart" --include="*.go" --include="*.rs" . 2>/dev/null | head -n 1; then
  DOC_LANGUAGE="fr"
fi

# D√©tection automatique du langage de programmation et analyse statique
if [ -f "*.py" ]; then
  pylint --disable=all --enable=missing-docstring .
elif [ -f "*.js" ] || [ -f "*.ts" ]; then
  eslint . --rule 'jsdoc/require-jsdoc: error'
elif [ -f "*.go" ]; then
  golint ./...
elif [ -f "*.rs" ]; then
  cargo doc --no-deps
elif [ -f "*.dart" ]; then
  melos analyze
fi

if [ $? -ne 0 ]; then
  echo "üî¥ Erreur : √âchec de l'analyse statique"
  exit 1
fi

# Sortie du r√©sum√© d'ex√©cution
echo "üìä R√©sultats d'ex√©cution :"
echo "- Langue de documentation : $DOC_LANGUAGE"
echo "- Commentaires ajout√©s : $ADDED_COMMENTS"
echo "- Commentaires mis √† jour : $UPDATED_COMMENTS"
echo "- Erreurs : $ERRORS"
```

### Crit√®res de r√©ussite

1. **Crit√®res d'ach√®vement** : R√©ussite quand tous les √©l√©ments suivants sont satisfaits :
   - Analyse statique sp√©cifique au langage R√âUSSIE
   - Nombre d'erreurs est 0
   - Tous les commentaires ajout√©s/mis √† jour respectent les standards

2. **R√©ussite partielle** : Dans les cas suivants :
   - Nombre d'erreurs inf√©rieur √† 5
   - Plus de 90% respectent les standards

3. **√âchec** : Dans les cas suivants :
   - Analyse statique √âCHOU√âE
   - Nombre d'erreurs est 5 ou plus

### Int√©gration avec Claude

```bash
# Analyser tout le projet (d√©tection automatique de langue)
find . -type f \( -name "*.py" -o -name "*.js" -o -name "*.ts" \)
/update-doc-string
"Update this project's docstrings following language-specific best practices"
# ‚Üí Si les commentaires existants contiennent du fran√ßais, ex√©cuter avec fr ; sinon, ex√©cuter avec en

# Ex√©cuter explicitement avec documentation anglaise
/update-doc-string --lang en
"Update docstrings following language-specific best practices"

# Ex√©cuter explicitement avec documentation fran√ßaise
/update-doc-string --lang fr
"Update this project's docstrings following language-specific best practices"

# Ex√©cuter sans marqueurs (d√©tection automatique de langue)
/update-doc-string --marker false
"Improve existing docstrings without adding Claude markers"

# Documentation anglaise, sans marqueurs
/update-doc-string --lang en --marker false
"Improve existing docstrings without adding Claude markers"
```
