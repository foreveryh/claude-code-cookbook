## Task

启动专用代理，自主执行复杂的搜索、调查和分析任务。通过组合多个工具进行大规模信息处理，重视上下文效率。

### 使用方法

```bash
# 向 Claude 请求 Task
「用 Task 调查[课题]」
```

### Task 的特点

**自主执行**

- 自动组合多个工具执行
- 分阶段信息收集和分析
- 结果整合和结构化报告

**高效信息处理**

- 优化上下文消耗
- 大规模文件搜索和解析
- 从外部信息源收集数据

**质量保证**

- 信息源可靠性检查
- 多角度验证
- 自动补充缺失信息

### 基本示例

```bash
# 复杂代码库调查
「用 Task 调查这个功能在哪些文件中实现」

# 大规模文件搜索
「用 Task 识别配置文件的不一致」

# 外部信息收集
「用 Task 调查最新的 AI 技术趋势」
```

### 与 Claude 配合

```bash
# 复杂问题分析
「用 Task 分析内存泄漏的原因。包括性能分析结果和日志」

# 依赖关系调查
「用 Task 调查这个 npm 包的漏洞」

# 竞品分析
「用 Task 调查竞品服务的 API 规格」

# 架构分析
「用 Task 分析这个微服务的依赖关系」
```

### 与其他命令的区别

#### Task vs 其他命令

| 命令 | 主要用途 | 执行方式 | 信息收集 |
|---------|---------|----------|----------|
| **Task** | 调查・分析・搜索 | 自主执行 | 多源 |
| ultrathink | 深度思考・判断 | 结构化思考 | 以现有知识为主 |
| sequential-thinking | 问题解决・设计 | 分阶段思考 | 按需 |
| plan | 制定实施计划 | 批准流程 | 需求分析 |

#### 判断流程图

```
需要信息收集？
├─ Yes → 多源・大规模？
│          ├─ Yes → **Task**
│          └─ No → 常规提问
└─ No → 需要深度思考？
          ├─ Yes → ultrathink/sequential-thinking
          └─ No → 常规提问
```

### 有效场景・不需要的场景

**有效场景**

- 复杂代码库调查（依赖关系、架构分析）
- 大规模文件搜索（特定实现模式、配置文件）
- 外部信息收集和整理（技术趋势、库调查）
- 多源信息整合（日志解析、指标分析）
- 重复调查工作（安全审计、技术债务调查）
- 想避免上下文消耗的大规模分析

**不需要的场景**

- 简单问题或可用现有知识回答的内容
- 短时间完成的单次工作
- 需要交互式确认和咨询的工作
- 实施或设计判断（plan 或思考类命令更合适）

### 分类详细示例

#### 系统分析・调查

```bash
# 复杂系统分析
「用 Task 识别电商网站的瓶颈。调查数据库、API、前端的整体」

# 架构分析
「用 Task 分析这个微服务的依赖关系。包括 API 通信和数据流」

# 技术债务调查
「用 Task 分析遗留代码的技术债务。包括重构优先级」
```

#### 安全・合规

```bash
# 安全审计
「用 Task 调查这个应用的漏洞。基于 OWASP Top 10」

# 许可证调查
「用 Task 调查项目依赖的许可证问题」

# 配置文件审计
「用 Task 识别安全配置的不一致。包括环境间的差异」
```

#### 性能・优化

```bash
# 性能分析
「用 Task 识别应用中的慢查询。包括执行计划和优化方案」

# 资源使用调查
「用 Task 调查内存泄漏的原因。包括性能分析结果和代码解析」

# 打包大小分析
「用 Task 调查前端打包大小问题。包括优化建议」
```

#### 外部信息收集

```bash
# 技术趋势调查
「用 Task 调查 2024 年的 JavaScript 框架动向」

# 竞品分析
「用 Task 调查竞品服务的 API 规格。包括功能对比表」

# 库评估
「用 Task 调查状态管理库的比较。包括性能和学习成本」
```

### 执行流程和质量保证

#### Task 的执行流程

```
1. 初始分析
   ├─ 分解课题和确定调查范围
   ├─ 选择必要的工具和信息源
   └─ 制定执行计划

2. 信息收集
   ├─ 文件搜索・代码解析
   ├─ 收集外部信息
   └─ 数据结构化

3. 分析・整合
   ├─ 分析收集信息的关联性
   ├─ 识别模式和问题点
   └─ 验证假设

4. 报告・建议
   ├─ 结构化结果
   ├─ 创建改进建议
   └─ 提示下一步行动
```

#### 质量保证

- **信息源可靠性检查**: 通过多源确认事实
- **完整性确认**: 检查调查对象是否有遗漏
- **一致性验证**: 确认矛盾信息的整合性
- **实用性评估**: 评估建议的可行性和效果

### 错误处理和约束事项

#### 常见约束

- **外部 API 使用限制**: 速率限制和认证错误
- **大文件处理限制**: 内存和超时约束
- **访问权限问题**: 文件和目录的访问限制

#### 错误时的处理

- **部分结果报告**: 仅使用获取的信息进行分析
- **替代方案建议**: 在约束下的替代调查方法
- **分阶段执行**: 分割执行大规模任务

### 注意事项

- Task 最适合复杂且自主的调查和分析任务
- 简单问题或需要即时回答时，请使用常规提问形式
- 调查结果作为参考信息，重要判断必须验证
- 收集外部信息时，注意信息的时效性和准确性

### 执行示例

```bash
# 使用示例
「用 Task 调查 GraphQL Schema 的问题」

# 预期行为
# 1. 启动专用代理
# 2. 搜索 GraphQL 相关文件
# 3. 解析 Schema 定义
# 4. 与最佳实践比较
# 5. 识别问题并提出改进建议
# 6. 创建结构化报告
```
