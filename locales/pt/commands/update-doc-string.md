## Update Doc String

Gerencia sistematicamente docstrings/coment√°rios multil√≠ngues e mant√©m documenta√ß√£o de alta qualidade.

### Uso

```bash
# Executar com detec√ß√£o autom√°tica de idioma
"Adicione docstrings a classes e fun√ß√µes sem coment√°rios e atualize coment√°rios que n√£o atendem aos crit√©rios"

# Executar especificando idioma
/update-doc-string --lang python
"Atualize docstrings de arquivos Python em conformidade com PEP 257"

# Organizar documenta√ß√£o de diret√≥rio espec√≠fico
"Adicione JSDoc √†s fun√ß√µes em src/components/"
```

### Op√ß√µes

- `--lang <en|pt>` : Idioma de descri√ß√£o da documenta√ß√£o (padr√£o: detec√ß√£o autom√°tica dos coment√°rios existentes, pt se n√£o houver)
- `--style <estilo>` : Especificar estilo de documenta√ß√£o (com padr√µes espec√≠ficos por idioma)
- `--marker <true|false>` : Se deve adicionar marcadores Claude (padr√£o: true)

### Exemplos b√°sicos

```bash
# 1. An√°lise de arquivos alvo (detec√ß√£o autom√°tica da linguagem de programa√ß√£o)
find . -type f \( -name "*.py" -o -name "*.js" -o -name "*.ts" -o -name "*.dart" -o -name "*.go" -o -name "*.rs" \) | grep -v test
"Identifique elementos com docstring insuficiente (0 linhas de coment√°rio ou menos de 30 caracteres)"

# 2. Adi√ß√£o de documenta√ß√£o (detec√ß√£o autom√°tica de idioma)
"Adicione docstring com elementos essenciais espec√≠ficos do idioma aos elementos identificados"
# ‚Üí Se houver japon√™s nos coment√°rios existentes, escrever em japon√™s, sen√£o em ingl√™s

# 3. Adi√ß√£o de documenta√ß√£o (especifica√ß√£o expl√≠cita de ingl√™s)
/update-doc-string --lang en
"Add docstrings with required elements to the identified elements"

# 4. Verifica√ß√£o de marcador
"Confirme que todas as docstrings adicionadas/atualizadas possuem marcadores Claude"
```

### Procedimento de execu√ß√£o

#### 1. Prioridade dos elementos alvo

1. üî¥ **M√°xima prioridade**: Elementos sem docstring/coment√°rios (0 linhas de coment√°rio)
2. üü° **Pr√≥xima prioridade**: Elementos que n√£o atendem aos crit√©rios (menos de 30 caracteres ou falta elementos essenciais)
3. üü¢ **Alvo de verifica√ß√£o**: Coment√°rios existentes sem marcadores Claude

**Elementos alvo (comum a todas as linguagens)**:

- Class/defini√ß√µes de classe
- Function/fun√ß√µes e m√©todos
- Module/m√≥dulos (Python, Go)
- Enum/tipos enumerados
- Interface/interfaces (TypeScript, Go)

#### 2. Regras de escrita por idioma

**Python (PEP 257)**:

```python
# Vers√£o em portugu√™s (padr√£o)
def calculate_total(items: List[Item]) -> float:
    """Calcula o valor total de uma lista de itens. (30-60 caracteres)

    Multiplica o pre√ßo e quantidade de cada item e retorna o total
    com impostos. Retorna 0.0 para listas vazias. (50-200 caracteres)

    Args:
        items: Lista de itens para c√°lculo

    Returns:
        Valor total com impostos

    Generated by Claude ü§ñ
    """

# Vers√£o em ingl√™s (--lang en)
def calculate_total(items: List[Item]) -> float:
    """Calculate the total amount for a list of items. (30-60 chars)

    Multiplies the price and quantity of each item and returns
    the total with tax. Returns 0.0 for empty lists. (50-200 chars)

    Args:
        items: List of items to calculate

    Returns:
        Total amount with tax

    Generated by Claude ü§ñ
    """
```

**JavaScript/TypeScript (JSDoc)**:

```javascript
/**
 * Componente que exibe o perfil do usu√°rio. (30-60 caracteres)
 *
 * Exibe imagem de avatar, nome de usu√°rio e informa√ß√µes de status,
 * fazendo transi√ß√£o para tela de detalhes do perfil ao clicar. (50-200 caracteres)
 *
 * @param {Object} props - Propriedades do componente
 * @param {string} props.userId - ID do usu√°rio
 * @param {boolean} [props.showStatus=true] - Flag de exibi√ß√£o de status
 * @returns {JSX.Element} Componente renderizado
 *
 * @generated by Claude ü§ñ
 */
const UserProfile = ({ userId, showStatus = true }) => {
```

**Go**:

```go
// CalculateTotal calcula o valor total de uma lista de itens. (30-60 caracteres)
//
// Multiplica o pre√ßo e quantidade de cada item e retorna o total
// com impostos. Retorna 0.0 para slices vazios. (50-200 caracteres)
//
// Generated by Claude ü§ñ
func CalculateTotal(items []Item) float64 {
```

**Rust**:

```rust
/// Calcula o valor total de uma lista de itens. (30-60 caracteres)
///
/// Multiplica o pre√ßo e quantidade de cada item e retorna o total
/// com impostos. Retorna 0.0 para vetores vazios. (50-200 caracteres)
///
/// Generated by Claude ü§ñ
pub fn calculate_total(items: &[Item]) -> f64 {
```

**Dart (DartDoc)**:

```dart
/// Widget que exibe o perfil do usu√°rio. (30-60 caracteres)
///
/// Organiza verticalmente imagem de avatar, nome de usu√°rio e informa√ß√µes de status,
/// fazendo transi√ß√£o para tela de detalhes do perfil ao tocar. (50-200 caracteres)
///
/// Generated by Claude ü§ñ
class UserProfileWidget extends StatelessWidget {
```

#### 3. Regras de preserva√ß√£o de conte√∫do existente

1. **Quando coment√°rio existente atende aos crit√©rios**: Preservar como est√° (n√£o adicionar novo)
   - Crit√©rios: 30+ caracteres e cont√©m elementos essenciais (resumo, detalhes, marcador)
2. **Quando coment√°rio existente n√£o atende aos crit√©rios**: Substituir completamente (n√£o duplicar)
3. **Quando n√£o h√° coment√°rio existente**: Adicionar novo coment√°rio

**Informa√ß√µes importantes a preservar**:

- URLs e links: `See also:`, `@see`, `Veja tamb√©m:` etc.
- Coment√°rios TODO: Formatos `TODO:`, `FIXME:`, `XXX:`
- Avisos: `Note:`, `Warning:`, `Aten√ß√£o:` etc.
- Exemplos de uso: `Example:`, `Exemplo:`, `# Examples` etc.
- Descri√ß√µes existentes de par√¢metros e valores de retorno

### Configura√ß√µes por idioma

```yaml
# Configura√ß√µes padr√£o por idioma
languages:
  python:
    style: "google"  # google, numpy, sphinx
    indent: 4
    quotes: '"""'

  javascript:
    style: "jsdoc"
    indent: 2
    prefix: "/**"
    suffix: "*/"

  typescript:
    style: "tsdoc"
    indent: 2
    prefix: "/**"
    suffix: "*/"

  go:
    style: "godoc"
    indent: 0
    prefix: "//"

  rust:
    style: "rustdoc"
    indent: 0
    prefix: "///"

  dart:
    style: "dartdoc"
    indent: 0
    prefix: "///"
```

### Lista de verifica√ß√£o de qualidade

- ‚úÖ **Contagem de caracteres**: Respeitar rigorosamente resumo 30-60 caracteres, detalhes 50-200 caracteres
- ‚úÖ **Elementos essenciais**: Incluir obrigatoriamente 3 elementos: resumo, descri√ß√£o detalhada, marcador Claude
- ‚úÖ **Completude**: Descrever fun√ß√£o, contexto de uso, pontos de aten√ß√£o
- ‚úÖ **Conven√ß√µes da linguagem**: Conformidade com guias de estilo oficiais de cada linguagem
- ‚úÖ **Exce√ß√µes**: Descri√ß√£o de erros e exce√ß√µes (quando aplic√°vel)
- ‚úÖ **Precis√£o**: Analisar implementa√ß√£o e descrever apenas fatos

### Observa√ß√µes

**üî¥ Itens absolutamente proibidos**:

- ‚ùå Altera√ß√µes de c√≥digo al√©m de coment√°rios de documenta√ß√£o
- ‚ùå Suposi√ß√µes sobre detalhes de implementa√ß√£o (descrever apenas fatos)
- ‚ùå Formatos que violam conven√ß√µes da linguagem
- ‚ùå Remo√ß√£o ou altera√ß√£o de anota√ß√µes de tipo existentes
- ‚ùå Duplica√ß√£o com coment√°rios existentes
- ‚ùå Coment√°rios abaixo do crit√©rio de caracteres em arquivos de teste

**Execu√ß√£o e verifica√ß√£o**:

```bash
# Registro de resultados de execu√ß√£o
ADDED_COMMENTS=0
UPDATED_COMMENTS=0
ERRORS=0

# Detec√ß√£o autom√°tica de idioma dos coment√°rios existentes
# Se detectar padr√µes portugueses comuns ‚Üí pt, sen√£o en
DOC_LANGUAGE="en"  # padr√£o
if grep -r '√ß√£o\|√µes\|agem\|√°rio\|√≥ria\|√™ncia\|portugu√™s\|brasil' --include="*.py" --include="*.js" --include="*.ts" --include="*.dart" --include="*.go" --include="*.rs" . 2>/dev/null | head -n 1; then
  DOC_LANGUAGE="pt"
fi

# Detec√ß√£o autom√°tica de linguagem de programa√ß√£o e an√°lise est√°tica
if [ -f "*.py" ]; then
  pylint --disable=all --enable=missing-docstring .
elif [ -f "*.js" ] || [ -f "*.ts" ]; then
  eslint . --rule 'jsdoc/require-jsdoc: error'
elif [ -f "*.go" ]; then
  golint ./...
elif [ -f "*.rs" ]; then
  cargo doc --no-deps
elif [ -f "*.dart" ]; then
  melos analyze
fi

if [ $? -ne 0 ]; then
  echo "üî¥ Erro: An√°lise est√°tica falhou"
  exit 1
fi

# Sa√≠da do resumo de execu√ß√£o
echo "üìä Resultado da execu√ß√£o:"
echo "- Idioma da documenta√ß√£o: $DOC_LANGUAGE"
echo "- Coment√°rios adicionados: $ADDED_COMMENTS itens"
echo "- Coment√°rios atualizados: $UPDATED_COMMENTS itens"
echo "- N√∫mero de erros: $ERRORS itens"
```

### Crit√©rios de sucesso da execu√ß√£o

1. **Determina√ß√£o de conclus√£o**: Sucesso quando atende a todos os seguintes
   - An√°lise est√°tica espec√≠fica da linguagem PASSOU
   - N√∫mero de erros √© 0
   - Todos os coment√°rios adicionados/atualizados atendem aos crit√©rios

2. **Sucesso parcial**: Nos seguintes casos
   - N√∫mero de erros menor que 5
   - 90% ou mais do total atende aos crit√©rios

3. **Falha**: Nos seguintes casos
   - An√°lise est√°tica FALHOU
   - N√∫mero de erros 5 ou mais

### Integra√ß√£o com Claude

```bash
# An√°lise de projeto inteiro (detec√ß√£o autom√°tica de idioma)
find . -type f \( -name "*.py" -o -name "*.js" -o -name "*.ts" \)
/update-doc-string
"Atualize as docstrings deste projeto seguindo as melhores pr√°ticas espec√≠ficas de cada linguagem"
# ‚Üí Se houver japon√™s nos coment√°rios existentes, executa em ja, sen√£o en

# Execu√ß√£o expl√≠cita em ingl√™s
/update-doc-string --lang en
"Update docstrings following language-specific best practices"

# Execu√ß√£o expl√≠cita em japon√™s
/update-doc-string --lang pt
"Atualize as docstrings deste projeto seguindo as melhores pr√°ticas espec√≠ficas de cada linguagem"

# Execu√ß√£o sem marcador (detec√ß√£o autom√°tica de idioma)
/update-doc-string --marker false
"Improve existing docstrings without adding Claude markers"

# Documenta√ß√£o em ingl√™s, sem marcador
/update-doc-string --lang en --marker false
"Improve existing docstrings without adding Claude markers"
```
