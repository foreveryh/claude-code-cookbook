## Update Dart Doc

Gerencia sistematicamente coment√°rios DartDoc de arquivos Dart e mant√©m documenta√ß√£o em portugu√™s de alta qualidade.

### Uso

```bash
# Executar adi√ß√£o nova e atualiza√ß√£o simultaneamente
"Adicione DartDoc a classes sem coment√°rios e atualize coment√°rios que n√£o atendem aos crit√©rios"

# Verificar arquivos alterados no PR
"Verifique se h√° marcadores Claude no DartDoc dos arquivos alterados no PR #4308"

# Organizar documenta√ß√£o de diret√≥rio espec√≠fico
"Adicione DartDoc √†s classes Widget em packages/app/lib/ui/screen/"

# Executar sem marcador
/update-dart-doc --marker false
"Melhore o DartDoc do projeto existente (sem adicionar marcadores Claude)"
```

### Op√ß√µes

- `--marker <true|false>` : Se deve adicionar marcadores Claude (padr√£o: true)

### Exemplos b√°sicos

```bash
# 1. An√°lise de arquivos alvo
find . -name "*.dart" -not -path "*/.*" | grep -v "_test.dart" | grep -v "_vrt.dart"
"Identifique classes com DartDoc insuficiente (0 linhas de coment√°rio ou menos de 30 caracteres)"

# 2. Adi√ß√£o de documenta√ß√£o
"Adicione coment√°rios DartDoc contendo elementos essenciais √†s classes identificadas"

# 3. Verifica√ß√£o de marcador
"Confirme que todos os DartDoc adicionados/atualizados possuem marcadores Claude"
```

### Procedimento de execu√ß√£o

#### 1. Prioridade dos elementos alvo

1. üî¥ **M√°xima prioridade**: Elementos sem coment√°rios DartDoc (0 linhas de coment√°rio)
2. üü° **Pr√≥xima prioridade**: Elementos que n√£o atendem aos crit√©rios (menos de 30 caracteres ou falta elementos essenciais)
3. üü¢ **Alvo de verifica√ß√£o**: Coment√°rios existentes sem marcadores Claude

**Elementos alvo**:

- Class (todas as defini√ß√µes de classe)
- Enum (tipos enumerados)
- Extension (m√©todos de extens√£o)
- Fun√ß√µes importantes (fun√ß√µes de n√≠vel superior, opcionais)

#### 2. Regras de escrita DartDoc

**Estrutura b√°sica**:

```dart
/// {Descri√ß√£o resumida do elemento} (30-60 caracteres, obrigat√≥rio)
///
/// {Descri√ß√£o detalhada} (fun√ß√£o, contexto de uso, pontos de aten√ß√£o obrigat√≥rios, 50-200 caracteres)
///
/// Generated by Claude ü§ñ
@Anotacao  // N√£o alterar anota√ß√µes existentes
class NomeClasse {
```

**Estilo de escrita**:

- Linguagem formal: "exibe", "√© uma classe que gerencia"
- Pontua√ß√£o usa "." e ","
- Espa√ßo entre portugu√™s e caracteres alfanum√©ricos
- Termos t√©cnicos em portugu√™s: "estado de Authentication"
- Cada linha dentro de 80 caracteres

#### 3. Exemplos de descri√ß√£o por categoria de classe

**Classes de gerenciamento de estado (Riverpod)**:

```dart
/// State que gerencia o estado de desativa√ß√£o de gestos de swipe horizontal.
///
/// Usado quando √© necess√°rio desativar swipe horizontal em telas espec√≠ficas
/// ou durante opera√ß√µes. Por exemplo, durante exibi√ß√£o de carrossel ou entrada espec√≠fica.
///
/// Generated by Claude ü§ñ
@Riverpod(keepAlive: true, dependencies: [])
class HorizontalDragGestureIgnoreState extends _$HorizontalDragGestureIgnoreState {
```

**Classes Widget**:

```dart
/// Widget que exibe o perfil do usu√°rio.
///
/// Organiza verticalmente imagem de avatar, nome de usu√°rio e informa√ß√µes de status,
/// fazendo transi√ß√£o para tela de detalhes do perfil ao tocar.
///
/// Generated by Claude ü§ñ
class UserProfileWidget extends HookConsumerWidget {
```

#### 4. Regras de preserva√ß√£o de conte√∫do existente

1. **Quando coment√°rio existente atende aos crit√©rios**: Preservar como est√° (n√£o adicionar novo)
   - Crit√©rios: 30+ caracteres e cont√©m elementos essenciais (resumo, detalhes, marcador)
2. **Quando coment√°rio existente n√£o atende aos crit√©rios**: Substituir completamente (n√£o duplicar)
3. **Quando n√£o h√° coment√°rio existente**: Adicionar novo coment√°rio

**Informa√ß√µes importantes a preservar**:

- URLs e links: Refer√™ncias come√ßando com `See also:`
- Coment√°rios TODO: Formato `TODO(nome_usuario):`
- Avisos: Alertas como `Aten√ß√£o:` ou `Warning:`
- Exemplos de uso: C√≥digo come√ßando com `Exemplo:` ou `Example:`
- Restri√ß√µes t√©cnicas: Descri√ß√µes de performance ou limita√ß√µes

### Gerenciamento de marcadores Claude

```bash
# Formato do marcador
/// Generated by Claude ü§ñ

# Verifica√ß√£o de marcador em arquivos alterados no PR
gh pr diff 4308 --name-only | grep "\.dart$" | xargs grep -l "Generated by Claude"
"Adicione marcadores aos arquivos sem marcador"
```

### Lista de verifica√ß√£o de qualidade

- ‚úÖ **Contagem de caracteres**: Respeitar rigorosamente resumo 30-60 caracteres, detalhes 50-200 caracteres
- ‚úÖ **Elementos essenciais**: Incluir obrigatoriamente 3 elementos: resumo, descri√ß√£o detalhada, marcador Claude
- ‚úÖ **Completude**: Descrever fun√ß√£o, contexto de uso, pontos de aten√ß√£o
- ‚úÖ **Consist√™ncia**: Unificar estilo em linguagem formal
- ‚úÖ **Formata√ß√£o**: Espa√ßo entre portugu√™s e ingl√™s
- ‚úÖ **Precis√£o**: Analisar implementa√ß√£o e descrever apenas fatos
- ‚úÖ **Estrutura**: Preservar anota√ß√µes, posicionar coment√°rios acima
- ‚úÖ **Comprimento**: Cada linha dentro de 80 caracteres
- ‚úÖ **Marcador**: Adicionar obrigatoriamente marcador para altera√ß√µes feitas por Claude

### Observa√ß√µes

**üî¥ Itens absolutamente proibidos**:

- ‚ùå Altera√ß√µes de c√≥digo al√©m de coment√°rios de documenta√ß√£o
- ‚ùå Suposi√ß√µes sobre detalhes de implementa√ß√£o (descrever apenas fatos)
- ‚ùå Mistura n√£o natural de ingl√™s e portugu√™s
- ‚ùå Remo√ß√£o ou altera√ß√£o de anota√ß√µes existentes
- ‚ùå Duplica√ß√£o com coment√°rios existentes
- ‚ùå Coment√°rios abaixo do crit√©rio de caracteres em arquivos de teste (`*_test.dart`)
- ‚ùå Coment√°rios abaixo do crit√©rio de caracteres em arquivos VRT (`*_vrt.dart`)

**An√°lise est√°tica e commit**:

```bash
# Registro de resultados de execu√ß√£o
ADDED_COMMENTS=0
UPDATED_COMMENTS=0
ERRORS=0

# Verifica√ß√£o ap√≥s altera√ß√£o
melos analyze
if [ $? -ne 0 ]; then
  echo "üî¥ Erro: An√°lise est√°tica falhou"
  exit 1
fi

# Sa√≠da do resumo de execu√ß√£o
echo "üìä Resultado da execu√ß√£o:"
echo "- Coment√°rios adicionados: $ADDED_COMMENTS itens"
echo "- Coment√°rios atualizados: $UPDATED_COMMENTS itens"
echo "- N√∫mero de erros: $ERRORS itens"

# Exemplo de commit
git commit -m "docs: adicionar e atualizar coment√°rios DartDoc

- Adicionar DartDoc a classes, enum, extension que n√£o atendem aos crit√©rios
- Atualizar coment√°rios com menos de 30 caracteres conforme crit√©rios
- Adicionar marcadores Claude uniformemente

Resultado da execu√ß√£o:
- Adicionados: $ADDED_COMMENTS itens
- Atualizados: $UPDATED_COMMENTS itens

Generated by Claude ü§ñ"
```

### Crit√©rios de sucesso da execu√ß√£o

1. **Determina√ß√£o de conclus√£o**: Sucesso quando atende a todos os seguintes
   - `melos analyze` PASSOU
   - N√∫mero de erros √© 0
   - Todos os coment√°rios adicionados/atualizados atendem aos crit√©rios

2. **Sucesso parcial**: Nos seguintes casos
   - N√∫mero de erros menor que 5
   - 90% ou mais do total atende aos crit√©rios

3. **Falha**: Nos seguintes casos
   - `melos analyze` FALHOU
   - N√∫mero de erros 5 ou mais
